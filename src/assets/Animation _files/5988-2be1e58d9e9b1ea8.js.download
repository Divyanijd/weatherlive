"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5988],{77221:function(e,t,n){n.d(t,{o:function(){return o}});var a=n(97458);const o=n(52983).forwardRef(((e,t)=>{let{children:n,contentWrapperCssClasses:o="flex-grow overflow-hidden",headerControl:i,headerWrapperCssClasses:s="bg-white h-16 flex items-center sm:px-6 px-2 border-b border-gray-100 flex-shrink-0",id:l}=e;return(0,a.jsxs)("div",{id:l,ref:t,"data-onboarding-watch":"create_menu_new_button",className:"flex overflow-y-auto absolute inset-0 flex-col w-full",children:[i&&(0,a.jsx)("div",{className:s,children:i}),(0,a.jsx)("div",{className:o,children:n})]})}));o.displayName="PageScaffold"},27245:function(e,t,n){n.d(t,{s:function(){return l}});var a=n(97458),o=(n(52983),n(75800)),i=n(84176),s=n(7108);const l=()=>{const[e,t]=(0,o.useRecoilState)(i.Hw);return(0,a.jsx)(s.n,{icon:"bounding-box",title:"Bounding box",onClick:()=>{t(!e)},iconColorClass:e?"text-actionPrimary":"text-gray-600"})}},88293:function(e,t,n){n.d(t,{s:function(){return l}});var a=n(97458),o=n(52983),i=n(8559),s=n(21199);const l=e=>{let{body:t,buttonTitle:n,cancelTitle:l="Cancel",closeCallback:r=(()=>null),confirmLoading:c=!1,isDestructive:d=!0,onConfirm:u,showModal:f,title:p,zIndexClassName:h="z-50"}=e;const m=(0,o.useCallback)((()=>{u()}),[u]),v=(0,o.useCallback)((e=>{r(e)}),[r]);return(0,a.jsx)(s.ModalV2,{show:f,title:p,paddingSize:"md",zIndexClassName:h,closeCallback:v,children:(0,a.jsxs)("div",{className:"mt-6 space-y-10",children:[(0,a.jsx)("p",{className:"text-sm text-gray-900",children:t}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)(i.z,{variant:"ghost",onClick:()=>v(s.CloseSource.CANCEL_BUTTON),fluid:!0,children:l}),(0,a.jsx)(i.z,{disabled:c,showLoader:c,color:d?"red":"teal",onClick:m,fluid:!0,children:n})]})]})})};t.Z=l},65988:function(e,t,n){n.r(t),n.d(t,{default:function(){return We}});var a=n(97458),o=n(96734),i=n(89372),s=n(14854),l=n(78463),r=n(83849),c=n.n(r),d=n(79120),u=n(77179),f=n.n(u),p=n(40586),h=n(8e3),m=n.n(h),v=n(29130),b=n.n(v),y=n(52983),C=n(75296),g=n(75800),w=n(80794),E=n(21821),x=n(77221),S=n(27245),I=n(21325),k=n(57121),A=n(21199),T=n(20736),N=n(7108),O=n(88293),j=n(74699),L=n(30719),M=n(63988),_=n(12077),R=n(77468),P=n(65661),D=n(55879),U=n(14003),F=n(17097),B=n(82929),G=n(95315),Y=n(99509),z=n(58843),V=n(64651),Z=n(50600),q=n(67339),W=n(84176),K=n(34452),H=n(46850),J=n(34382),Q=n(5762),X=n(79864),$=n(56835),ee=n(19877),te=n(6243),ne=n(56098),ae=n(95556),oe=n(29426);const ie=async(e,t)=>{try{const n=new ClipboardItem({[t]:Promise.resolve(e())});return await navigator.clipboard.write([n]),!0}catch(e){return!1}};var se=n(9429),le=n(19906),re=n(53690),ce=n(55039),de=n(83421),ue=n(65888);const fe=async e=>{let{animation:t,backgroundColor:a,container:o,dotLottie:i,format:s,frame:l,height:r,onSnapshot:c,themeId:d,width:u}=e;const f=(e=>{switch(e){case"text/plain":case"image/svg+xml":return"text/plain";case"image/png":return"image/png";default:throw new Error("Invalid content type")}})(s===ne.U.SVG?"image/svg+xml":"image/png");if(!d){if(!t)return;await(async e=>{let{animation:t,backgroundColor:a,container:o,contentType:i,format:s,frame:l,height:r,onSnapshot:c,width:d}=e;const u=(await n.e(7255).then(n.t.bind(n,53409,23))).default.loadAnimation({container:o,renderer:"svg",loop:!1,autoplay:!1,animationData:t});u.pause(),u.goToAndStop(l,!0);const f=o.firstChild.cloneNode(!0),p=Array.from(f.getElementsByTagName("image"));f.style.backgroundColor=a,f.setAttribute("width","".concat(d)),f.setAttribute("height","".concat(r)),(0,ue.jn)(f),p.forEach(ue.O6);const h=(new XMLSerializer).serializeToString(f);if(s===ne.U.SVG){const e=new Blob([h],{type:i});c({blob:e,contentType:i,format:s})}else{const e=new Worker(n.tu(new URL(n.p+n.u(3751),n.b)));e.onmessage=async t=>{if(t.data.type===ne.i.Error);else if(t.data.type===ne.i.Output){const e=t.data.buffer,n=new Blob([e],{type:i});c({blob:n,contentType:i,format:s})}e.terminate()},e.postMessage({type:ne.i.Input,svg:h,width:d,height:r,backgroundColor:a})}u.destroy()})({animation:t,backgroundColor:a,container:o,contentType:f,format:s,frame:l,height:r,onSnapshot:c,width:u})}if(s===ne.U.SVG)return;if(!i)return;const p=new OffscreenCanvas(u,r),h=p.getContext("2d"),m=new de.J({canvas:p,themeId:d,backgroundColor:a,autoplay:!1,data:await i.toArrayBuffer()});m.addEventListener("load",(async()=>{if(m.setFrame(l),!h){const e=await p.convertToBlob({type:f});return void await c({blob:e,contentType:f,format:s})}const e=await createImageBitmap(p);h.clearRect(0,0,p.width,p.height),a&&(h.rect(0,0,p.width,p.height),h.fillStyle=a||"transparent",h.fill()),h.drawImage(e,0,0,p.width,p.height);const t=await p.convertToBlob({type:f});await c({blob:t,contentType:f,format:s})}))};var pe=n(39609),he=n(90344),me=n(54557),ve=n(48140),be=n(13219),ye=n(37210),Ce=n(68456),ge=n(8559);const we=(0,ye.F4)({"0%":{opacity:0,transform:"scale(0)"},"100%":{opacity:1,transform:"scale(1)"}}),Ee=(0,ye.zo)(be.VY,{transformOrigin:"var(--radix-popover-content-transform-origin)",animation:"".concat(we," 0.2s ease-in"),zIndex:9}),xe=e=>{let{align:t,alignOffset:n,children:o,handleCtaClick:i,side:l,sideOffset:r=8}=e;const{done:c,nextStep:d,state:u}=(0,me.N)(),f=u.tasks[ve.O.ACCESSIBILITY_ANALYZER].show;(0,y.useEffect)((()=>{f&&(0,s.Z9)(new s.Z_({onboardingTaskId:ve.O.ACCESSIBILITY_ANALYZER,action:"view",label:"accessibility analyzer link popover",from:"accessibility analyzer link popover",step:"1"}))}),[f]);const p=(0,y.useCallback)((()=>{(0,s.Z9)(new s.Z_({onboardingTaskId:ve.O.ACCESSIBILITY_ANALYZER,action:"click",label:"dismiss CTA",from:"accessibility analyzer link popover",step:"1"})),c({taskId:ve.O.ACCESSIBILITY_ANALYZER})}),[c]),h=(0,y.useCallback)((()=>{(0,s.Z9)(new s.Z_({onboardingTaskId:ve.O.ACCESSIBILITY_ANALYZER,action:"click",label:"try it out CTA",from:"accessibility analyzer link popover",step:"1"})),d({taskId:ve.O.ACCESSIBILITY_ANALYZER}),null==i||i(Q.s.ACCESSIBILITY_ANALYZER)}),[i,d]),m=(0,y.useCallback)((e=>{e.preventDefault()}),[]);return(0,a.jsxs)(be.fC,{open:f,children:[(0,a.jsx)(be.ee,{children:o}),(0,a.jsx)(be.h_,{children:(0,a.jsxs)(Ee,{onOpenAutoFocus:m,onCloseAutoFocus:m,onFocusOutside:m,sideOffset:r,tabIndex:0,align:t,alignOffset:n,side:l,className:"relative rounded-lg flex-col w-[280px] h-full text-white bg-gray-900 z-10 border-0 select-none px-4 pb-3 pt-4 shadow-2xl",children:[(0,a.jsx)(be.Eh,{width:16,height:8,className:"visible text-gray-900 fill-current stroke-current"}),(0,a.jsxs)(Ce.k,{direction:"column",children:[(0,a.jsxs)(Ce.k,{justify:"between",align:"center",children:[(0,a.jsx)("h1",{className:"text-base font-bold text-white",children:"Accessibility Analyzer"}),(0,a.jsx)(k.h,{icon:"cross",sizeClass:"h-6 w-6",onClick:p,className:"text-white stroke-current",hoverBackgroundClass:"hover:bg-transparent"})]}),(0,a.jsx)("div",{className:"mt-4 mb-2 rounded-lg overflow-hidden bg-[#FF7BF9]",children:(0,a.jsx)("img",{src:"/images/accessibility-analyzer-popover/placeholder.png",alt:"Accessibility analyzer",className:"w-full h-auto"})}),(0,a.jsx)("p",{className:"text-sm text-gray-200 mb-7",children:"Lottie Accessibility Analyzer reviews key factors like color contrast, sensitivity motion, and more to identify issues, enhance experiences and meet accessibility standards."}),(0,a.jsx)(Ce.k,{columnGap:8,justify:"end",children:(0,a.jsx)(ge.z,{fontClasses:"font-bold",onClick:h,children:"Try it out"})})]})]})})]})},Se=e=>{let{canUseAccessibilityAnalyzer:t,currentPushoverTab:n,onAccessibilityAnalyzerMenuClick:o,onTabChange:i}=e;return t?(0,a.jsx)("div",{"data-onboarding-id":"accessibility-analyzer",children:(0,a.jsx)(xe,{handleCtaClick:i,side:"left",align:"start",alignOffset:-16,sideOffset:9,children:(0,a.jsx)(N.n,{icon:"accessibility",title:"Accessibility Analyzer",onClick:o,iconColorClass:n===Q.s.ACCESSIBILITY_ANALYZER?"text-actionPrimary":"text-gray-600"})})}):null};var Ie=n(93697),ke=n(35931),Ae=n(81025);const Te=e=>{let{children:t,onStateMachineToggle:n}=e;return(0,a.jsx)(Ae.J,{onStateMachineToggle:n,children:(0,a.jsx)(ke.s,{children:t})})},Ne=m()((async()=>n.e(469).then(n.bind(n,469))),{loadableGenerated:{webpack:()=>[469]},ssr:!1}),Oe=m()((async()=>n.e(7700).then(n.bind(n,47700))),{loadableGenerated:{webpack:()=>[47700]},ssr:!1}),je=m()((async()=>n.e(6482).then(n.bind(n,46482))),{loadableGenerated:{webpack:()=>[46482]},ssr:!1}),Le=m()((async()=>Promise.all([n.e(3986),n.e(9501),n.e(1158)]).then(n.bind(n,10374))),{loadableGenerated:{webpack:()=>[10374]},ssr:!1}),Me=m()((async()=>Promise.all([n.e(5795),n.e(7630)]).then(n.bind(n,7630))),{loadableGenerated:{webpack:()=>[7630]},ssr:!1}),_e=m()((async()=>(await n.e(7794).then(n.bind(n,77794))).AnimationAccessibilityAnalyzerPanel),{loadableGenerated:{webpack:()=>[77794]},ssr:!1}),Re=m()((async()=>Promise.all([n.e(2900),n.e(2081)]).then(n.bind(n,92081))),{loadableGenerated:{webpack:()=>[92081]},ssr:!1}),Pe=m()((async()=>n.e(5328).then(n.bind(n,35328))),{loadableGenerated:{webpack:()=>[35328]},ssr:!1}),De=m()((async()=>n.e(6846).then(n.bind(n,66846))),{loadableGenerated:{webpack:()=>[66846]},ssr:!1}),Ue=m()((async()=>n.e(2912).then(n.bind(n,82912))),{loadableGenerated:{webpack:()=>[82912]},ssr:!1}),Fe=m()((async()=>Promise.all([n.e(7713),n.e(4622),n.e(389)]).then(n.bind(n,50389))),{loadableGenerated:{webpack:()=>[50389]},ssr:!1}),Be=m()((async()=>Promise.all([n.e(243),n.e(2410),n.e(7090),n.e(4270),n.e(4235),n.e(5627),n.e(9455),n.e(9316),n.e(8852)]).then(n.bind(n,68852))),{loadableGenerated:{webpack:()=>[68852]},ssr:!1}),Ge=m()((async()=>Promise.resolve().then(n.bind(n,62260))),{loadableGenerated:{webpack:()=>[62260]},ssr:!1}),Ye=m()((async()=>n.e(1942).then(n.bind(n,31942))),{loadableGenerated:{webpack:()=>[31942]},ssr:!1}),ze=m()((async()=>Promise.all([n.e(5568),n.e(3889),n.e(5167)]).then(n.bind(n,85167))),{loadableGenerated:{webpack:()=>[85167]},ssr:!1}),Ve=m()((async()=>Promise.all([n.e(8607),n.e(6776)]).then(n.bind(n,46776))),{loadableGenerated:{webpack:()=>[46776]},ssr:!1}),Ze=m()((async()=>Promise.all([n.e(3986),n.e(3020),n.e(2900),n.e(3547),n.e(1999),n.e(9398)]).then(n.bind(n,23178))),{loadableGenerated:{webpack:()=>[23178]},ssr:!1}),qe=()=>{var e,t,n,r,u,h,m,v,E,ce,de,ue,ve,be,ye,Ce,ge,we,Ee,xe,ke,Ae;const{isConsideredNewUser:qe,start:We,state:Ke,stop:He}=(0,me.N)(),[Je,Qe]=(0,y.useState)(),[Xe,$e]=(0,g.useRecoilState)(W.sI),[et,tt]=(0,y.useState)(),[nt,at]=(0,y.useState)(),ot=(0,g.useSetRecoilState)(H.E4),it=(0,g.useSetRecoilState)(W.GG),[st,lt]=(0,y.useState)(null),[rt,ct]=(0,y.useState)(null),[dt,ut]=(0,y.useState)(!1),ft=(0,g.useResetRecoilState)(W.h3),pt=(0,g.useResetRecoilState)(W.lS),ht=(0,g.useSetRecoilState)(J.QJ),[mt,vt]=(0,y.useState)(!1),bt=(0,y.useRef)(!1),yt=(0,y.useRef)(!1),Ct=(0,g.useSetRecoilState)(H.qx),[gt,wt]=(0,y.useState)(),[Et,xt]=(0,y.useState)(!1),[St,It]=(0,y.useState)(!1),[kt,At]=(0,y.useState)(""),[Tt,Nt]=(0,y.useState)(Q.s.NONE),[Ot,jt]=(0,y.useState)(!1),Lt=(0,y.useRef)(null),Mt=/^((?!chrome|android).)*safari/iu.test(navigator.userAgent),[_t,Rt]=(0,y.useState)(!1),[Pt,Dt]=(0,y.useState)(),[Ut,Ft]=(0,y.useState)(null),[Bt,Gt]=(0,y.useState)(null),[Yt,zt]=(0,y.useState)(null),[Vt,Zt]=(0,y.useState)(null),[qt,Wt]=(0,y.useState)(""),[Kt,Ht]=(0,y.useState)(!1),[Jt,Qt]=(0,y.useState)(!1),Xt=(0,y.useRef)(!1),$t=(0,j.p)(),en=(0,p.useRouter)(),{frame:tn,sort:nn}=en.query,{done:an,isLoaded:on,setWelcomeText:sn,showChecklist:ln,showFirstPendingTask:rn,state:cn}=(0,G.d)(),{handback_id:dn,id:un}=en.query,fn=(0,_.a)(),{activeWorkspaceId:pn,setActiveWorkspace:hn,workspaces:mn}=(0,z.cF)(),vn=(0,o.SS)(l.AD.ENABLE_MERGE_DOWNLOAD_HANDOFF_PANEL).on,bn=(0,o.SS)(l.AD.ENABLE_ACCESSIBILITY_ANALYZER).on,yn=(0,o.SS)(l.AD.ENABLE_STATE_MACHINES).on,[Cn]=(0,w.aM)({query:V.wP,variables:{id:un},pause:!un,requestPolicy:"network-only"}),gn=(0,y.useMemo)((()=>!un||!Cn.data),[un,Cn.data]),[wn]=(0,w.aM)({query:V.xQ,variables:{id:un,sort:nn,folderId:null===(t=Cn.data)||void 0===t||null===(e=t.file.folder)||void 0===e?void 0:e.id},pause:gn}),[En]=(0,w.aM)({query:oe.gR,variables:{resourceId:null==Xe?void 0:Xe.id,resourceType:ae.f.FILE},pause:!(null==Xe?void 0:Xe.id)}),xn=(0,y.useMemo)((()=>{var e;const t="https://app.lottiefiles.com",n=null===(e=En.data)||void 0===e?void 0:e.publicShare,a="".concat(t,"/animation/").concat(null==Xe?void 0:Xe.id);return n?"".concat(t,"/share/").concat(null==n?void 0:n.shareCode):a}),[null==Xe?void 0:Xe.id,null===(n=En.data)||void 0===n?void 0:n.publicShare]),[Sn,In]=(0,D.w)(),[kn,An]=(0,B._)("animation_sidebar_panel_state",{}),Tn=(0,y.useCallback)((e=>{e?(lt(f()(e)),zt(f()(e))):(lt(null),zt(null))}),[]),Nn=e=>{var t,n;Ht(!0);const o="next"===e?null===(t=wn.data)||void 0===t?void 0:t.fileAboveAndBelowId.nextAnimation:null===(n=wn.data)||void 0===n?void 0:n.fileAboveAndBelowId.prevAnimation;if(o){const t={...en.query};t.id=o,en.push({pathname:"/animation/[id]",query:t},void 0,{shallow:!0}),"next"===e?yt.current=!1:bt.current=!1}else{const t="next"===e?bt:yt;if(!t.current){const e=(0,a.jsx)("div",{children:"No more animations to go to"});null==$t||$t.pushCustom(e,1e3,"!bg-gray-900","text-white"),t.current=!0}}};(0,F.Z)({key:"k",action:()=>Nn("next"),dependencies:[wn,Sn,en],takesPrecedence:!0}),(0,F.Z)({key:"j",action:()=>Nn("prev"),dependencies:[wn,Sn,en],takesPrecedence:!0}),(0,y.useEffect)((()=>{if(wn.data&&wn.data.fileAboveAndBelowId.nextAnimation&&!Xt.current){var e;const t="next-prev-toast-".concat(null===(e=fn.user)||void 0===e?void 0:e.id),n=localStorage.getItem(t),o=(new Date).getTime();if(!n||o-parseInt(n,10)>12096e5){localStorage.setItem(t,o.toString());const e=(0,a.jsxs)("div",{children:["Use the ",(0,a.jsx)("span",{className:"px-2 py-0.5 mx-1 bg-gray-500 rounded",children:"J"})," and"," ",(0,a.jsx)("span",{className:"px-2 py-0.5 mx-1 bg-gray-500 rounded",children:"K"})," keys to go to the next or previous animation"]});null==$t||$t.pushCustom(e,3e3,"!bg-gray-900","text-white")}Xt.current=!0}}),[$t,null===(r=fn.user)||void 0===r?void 0:r.id,wn.data]),(0,y.useEffect)((()=>{if(Cn.data){var e,t;const o=null===(e=Cn.data.file.folder)||void 0===e?void 0:e.id,i=null===(t=Cn.data.file.folder)||void 0===t?void 0:t.name,s=Cn.data.file.project.id,l=Cn.data.file.project.title;var n;const r=null!==(n=Cn.data.file.project.isPrivate)&&void 0!==n&&n;var a;const c=null!==(a=Cn.data.file.project.isSystem)&&void 0!==a&&a,d=Cn.data.file.project.workspaceId,u=mn.some((e=>{let{id:t}=e;var n;return t===(null===(n=Cn.data)||void 0===n?void 0:n.file.project.workspaceId)}));d&&u&&d!==pn&&hn(d,!1),ht({type:o?"folder":"project",name:o?i:l,folderId:o,folderName:i,projectId:s,projectTitle:l,isPrivate:r,isSystem:c,workspaceId:d})}}),[Cn.data,ht,pn,hn,mn]);const[On,jn]=(0,y.useState)(""),[Ln]=(0,g.useRecoilState)(W.h3),{canDownload:Mn,canFullAccess:_n,canView:Rn}=(0,M.a)({scopes:(null==Xe?void 0:Xe.animationPermissionScopes)||[]}),[Pn,Dn]=(0,y.useState)({id:"",showDescOnCollection:!1,description:"",descriptionModifiedBy:null});(0,y.useEffect)((()=>{var e;if((ft(),Cn.fetching&&Ct(!0),!Cn.fetching)&&(Ct(!1),un&&Sn===Q.s.NONE&&window.innerWidth>768))if(kn&&(null===(e=fn.user)||void 0===e?void 0:e.id)&&kn[fn.user.id]){var t,n,a;const e=kn[fn.user.id];e===Q.s.LOTTIE_MOCKUP?In(Q.s.SEGMENT_MOCKUP):yn&&(null===(a=Cn.data)||void 0===a||null===(n=a.file.fileObject)||void 0===n||null===(t=n.stateMachines)||void 0===t?void 0:t.length)?In(Q.s.STATE_MACHINES):In(e)}else if(!Kt){var o,i,s;if(yn)(null===(s=Cn.data)||void 0===s||null===(i=s.file.fileObject)||void 0===i||null===(o=i.stateMachines)||void 0===o?void 0:o.length)?In(Q.s.STATE_MACHINES):In(Q.s.NONE);else In(Q.s.DOWNLOAD)}return()=>{}}),[Cn,un]);const Un=(0,y.useCallback)((e=>{try{void 0!==(0,d.H3)(e)&&jn(e)}catch(e){jn("")}}),[]);(0,y.useEffect)((()=>{var e,t;if(null==Ln?void 0:Ln.fileObject){var n;Qe(Ln.fileObject.url),tt(Ln.fileObject.metadata),at(Ln.fileObject.attributes),ct(Ln.fileObject),wt(Ln.tags),Zt(null!==(n=Ln.fileObject.themes)&&void 0!==n?n:null),Un(Ln.backgroundColor);const e=Ln.fileObject.url,t=e.substring(e.lastIndexOf("/")+1,e.indexOf("?")).split(".").pop();it("lottie"===t)}else if((null===(e=Cn.data)||void 0===e?void 0:e.file)&&Cn.data.file.fileObject&&!Cn.fetching){var a,o;Qe(Cn.data.file.fileObject.url),$e(Cn.data.file),ot({type:"project",id:Cn.data.file.project.id}),tt(Cn.data.file.fileObject.metadata),at(Cn.data.file.fileObject.attributes),ct(Cn.data.file.fileObject),wt(Cn.data.file.currentVersion.tags),Zt(null!==(o=Cn.data.file.fileObject.themes)&&void 0!==o?o:null),Dn({id:Cn.data.file.id,showDescOnCollection:Cn.data.file.showDescOnCollection,description:Cn.data.file.description,descriptionUpdatedAt:null===(a=Cn.data.file)||void 0===a?void 0:a.descriptionUpdatedAt,descriptionModifiedBy:Cn.data.file.descriptionModifiedBy}),Un(Cn.data.file.backgroundColor);const e=Cn.data.file.fileObject.url,t=e.substring(e.lastIndexOf("/")+1,e.indexOf("?")).split(".").pop();it("lottie"===t)}else Cn.error&&(0,ee.w)(Cn.error);if(null===(t=Cn.data)||void 0===t?void 0:t.file.upgradeRequired)throw new L.K}),[Cn,Ln,it,$e,ot,Un]),(0,y.useEffect)((()=>{var e;(null===(e=Cn.data)||void 0===e?void 0:e.file.id)&&(0,s.Z9)(new s.Aj({fileId:Cn.data.file.id,projectId:Cn.data.file.project.id,workspaceId:Cn.data.file.project.workspaceId,url:window.location.href}))}),[null===(u=Cn.data)||void 0===u?void 0:u.file.id,null===(h=Cn.data)||void 0===h?void 0:h.file.project.id,null===(m=Cn.data)||void 0===m?void 0:m.file.project.workspaceId]);const[Fn,Bn]=(0,y.useState)(!1),[Gn,Yn]=(0,y.useState)(!1),zn=(0,C.r)(),[,Vn]=(0,g.useRecoilState)(K.YC),Zn=(0,y.useCallback)((()=>{en.query.comment&&(delete en.query.comment,en.push({pathname:en.pathname,query:en.query},void 0,{shallow:!0}))}),[en]),qn=(0,y.useCallback)((()=>{if(Sn===Q.s.ACCESSIBILITY_ANALYZER&&Ke.tasks[l.Oc.ACCESSIBILITY_ANALYZER].show&&He({taskId:l.Oc.ACCESSIBILITY_ANALYZER}),Sn===Q.s.STATE_MACHINES&&(0,s.Z9)(new s.E5({action:"panel-close",target:"state machine panel close button",description:"click to dismiss state machine panel"})),Sn===Q.s.SEGMENT_MOCKUP&&Et)return It(!0),void Nt(Q.s.NONE);In(Q.s.NONE),An((e=>{var t;if(null===(t=fn.user)||void 0===t?void 0:t.id){const t={...e};return delete t[fn.user.id],t}return e})),en.query.panel&&(delete en.query.panel,en.push({pathname:en.pathname,query:en.query},void 0,{shallow:!0}))}),[Sn,null===(v=fn.user)||void 0===v?void 0:v.id,Et,en,In,An,He,Ke.tasks]),Wn=(0,y.useCallback)((e=>()=>{if(Sn===e)qn();else{if(Sn===Q.s.SEGMENT_MOCKUP&&Et)return It(!0),void Nt(e);In(e),An((t=>{var n;return(null===(n=fn.user)||void 0===n?void 0:n.id)?{...t,[fn.user.id]:e}:t})),en.query.panel!==e&&(en.query.panel=e,en.push({pathname:en.pathname,query:en.query},void 0,{shallow:!0}))}}),[qn,Sn,null===(E=fn.user)||void 0===E?void 0:E.id,Et,en,In,An]);(0,y.useEffect)((()=>{Vn(""),vt(!1),Tn(null),Zn()}),[Sn,Vn,vt,Zn,Tn]),(0,F.Z)({key:"c",action:()=>{Sn!==Q.s.COMMENTS?Wn(Q.s.COMMENTS)():Sn===Q.s.COMMENTS&&qn()},dependencies:[Wn,qn,Sn]});const[Kn]=(0,w.aM)({query:Z.g,variables:{id:dn},pause:!dn});(0,y.useEffect)((()=>{Cn.data&&Xe&&(Sn!==Q.s.COMMENTS&&en.query.comment&&(Wn(Q.s.COMMENTS)(),en.push({pathname:en.pathname,query:en.query},void 0,{shallow:!0})),Mn()||Sn!==Q.s.DOWNLOAD||Wn(Q.s.COMMENTS)(),Mn()||Sn!==Q.s.EMBED||Wn(Q.s.COMMENTS)(),bn||Sn!==Q.s.ACCESSIBILITY_ANALYZER||Wn(Q.s.FILE_INFO)(),en.query.edit_description&&(Sn!==Q.s.FILE_INFO&&Wn(Q.s.FILE_INFO)(),vt(!0),delete en.query.edit_description,en.replace({pathname:en.pathname,query:en.query},void 0,{shallow:!0})))}),[Xe,Sn,en,Wn,mt,Mn,Cn.data,bn]);const Hn=(0,y.useCallback)((()=>{if(Et&&!Fn)return It(!0),void jt(!0);Fn?(Bn(!1),zn.exit()):(Bn(!0),qn(),zn.enter())}),[qn,Fn,zn,Et]),Jn=(0,y.useCallback)(((e,t)=>{t===zn&&Bn(!!e)}),[zn]);(0,y.useEffect)((()=>{var e;Xe&&("color-palette"!==en.query.from||(null===(e=cn.tasks[$.X.CUSTOMIZE_COLOR])||void 0===e?void 0:e.done)||(an($.X.CUSTOMIZE_COLOR),console.log("Show checklist 1!"),ln(!0)),"download"===en.query.from||"embed"===en.query.from||!on||cn.seen||cn.show||(sn(cn.newToOnboarding?"Welcome! Learn all about our platform's most helpful features with this checklist ✨":"Level up your motion design game by exploring our platform's most helpful features in this checklist ✨"),console.log("Show checklist 2!",on,cn.seen,cn.show),ln(!0),rn()))}),[Xe,cn,an]);const Qn=(0,y.useCallback)((()=>{Yn(!Gn)}),[Gn,Yn]),Xn=(0,y.useRef)(null),$n=(0,y.useMemo)((()=>(null==Ln?void 0:Ln.id)||(null==Xe?void 0:Xe.currentVersionId)||""),[null==Ln?void 0:Ln.id,null==Xe?void 0:Xe.currentVersionId]),ea=(0,y.useMemo)((()=>{var e,t;return{entityId:$n,entityGroupId:(null==Xe?void 0:Xe.id)||un,isEnabled:!(null==Ln?void 0:Ln.id)||Ln.id===(null==Xe?void 0:Xe.currentVersionId),workspaceId:(null==Xe||null===(t=Xe.project)||void 0===t||null===(e=t.workspace)||void 0===e?void 0:e.id)||""}}),[$n,null==Ln?void 0:Ln.id,null==Xe?void 0:Xe.currentVersionId,null==Xe?void 0:Xe.id,null==Xe||null===(de=Xe.project)||void 0===de||null===(ce=de.workspace)||void 0===ce?void 0:ce.id,un]),ta=(0,R.X0)(ea),na=(0,R.us)(ea),aa=(0,R.es)(ea),oa=(0,R.VP)(ea),ia=(0,R.UR)(ea),sa=(0,R.OL)(ea),la=(0,R._i)(ea),{canFetchMoreComments:ra,commentsQuery:ca,onFetchMoreComments:da,onHideReplies:ua,onShowReplies:fa,parentComment:pa,pushoverMode:ha}=(0,P.M)({entityId:Sn===Q.s.COMMENTS?$n:"",entityType:X.TY.FileVersion});(0,y.useEffect)((()=>{tn&&ua(null)}),[tn,ua]);const ma=(0,U.p)({color:On||"#f8fafc"}),[va]=(0,w.aM)({query:q.mT,variables:{id:un},pause:!un||Sn!==Q.s.COMMENTS}),[ba,ya]=(0,y.useState)(!1),Ca=(0,y.useCallback)((()=>ya(!0)),[]),ga=(0,y.useCallback)((()=>ya(!1)),[]),wa=(0,y.useCallback)((()=>{const e=new s.Rd("button","discard changes","unsaved segment changes modal");return Ot?(xt(!1),jt(!1),Bn(!0),In(Q.s.NONE),void zn.enter()):((0,s.Z9)(e),kt?(xt(!1),void en.push(kt)):(xt(!1),In(Tt),void Nt(Q.s.NONE)))}),[zn,en,In,Ot,Tt,kt]);(0,y.useEffect)((()=>{ga()}),[ha,ga]),(0,y.useEffect)((()=>{const e=e=>{if(Et&&!St)throw en.events.emit("routeChangeError"),It(!0),At(e),"Abort route change. Please ignore this error.";St&&It(!1)};return en.events.on("routeChangeStart",e),()=>{en.events.off("routeChangeStart",e)}}),[Et,en.events,St]);const Ea=(0,y.useCallback)((async e=>{await navigator.clipboard.writeText(xn),(0,s.Z9)(new s.wk({source:e,subject:"animation",variant:xn.includes("share")?"public-share":"direct"})),null==$t||$t.pushCustom("Animation link copied",2500,"!bg-gray-900","text-white")}),[xn,$t]),xa=(0,y.useCallback)((()=>{Rt(!1),Ft(null),Gt(null),Dt(void 0)}),[]),Sa=(0,y.useCallback)((async()=>{if(!Ut||!Bt||!Pt)return;if(await ie((async()=>Ut),Bt)){const e=Pt===ne.U.SVG?"SVG frame copied":"PNG frame copied";null==$t||$t.pushCustom(e,2500,"!bg-gray-900","text-white")}xa()}),[Ut,Bt,Pt,xa,$t]),Ia=(0,y.useCallback)((async e=>{if(Mt)return Gt(e.contentType),Dt(e.format),Ft(e.blob),void Rt(!0);if(await ie((async()=>e.blob),e.contentType)){const t=e.format===ne.U.SVG?"SVG frame copied":"PNG frame copied";null==$t||$t.pushCustom(t,2500,"!bg-gray-900","text-white")}}),[Mt,$t]),ka=(0,y.useCallback)((async e=>{let t,n,{format:a,frame:o,height:i,width:s}=e;if(!Je)return;if(qt)n=await pe.J2.fromURL(Je);else if(Yt)t=Yt;else{const e=await(0,te.tr)(Je);if(!e)return void(null==$t||$t.pushError("Failed "));t=e}fe({animation:t,dotLottie:n,themeId:qt||"",backgroundColor:Gn?"transparent":On,container:Lt.current,format:a,frame:o,height:i,width:s,onSnapshot:Ia})}),[On,Yt,Ia,qt,$t,Gn,Je]);(0,F.Z)({key:"l",takesPrecedence:!0,metaKeyRequired:!0,action:()=>{Ea("keypress")},dependencies:[Ea]});const Aa=(0,y.useCallback)((e=>{if(Sn!==e){if(Sn===Q.s.SEGMENT_MOCKUP&&Et)return It(!0),void Nt(e);(0,s.Z9)(new s.lF({location:e})),Wn(e)()}}),[Sn,Et,Wn]),Ta=(0,y.useCallback)((e=>{e===Q.s.ACCESSIBILITY_ANALYZER&&Ke.tasks[l.Oc.ACCESSIBILITY_ANALYZER].show&&He({taskId:l.Oc.ACCESSIBILITY_ANALYZER})}),[Ke.tasks,He]),Na=(0,y.useCallback)((e=>()=>{Ta(e),Aa(e)}),[Ta,Aa]),Oa=(0,y.useCallback)((e=>{const t=e===A.CloseSource.GENERIC?"cross":"stay on page",n=new s.Rd("button",t,"unsaved segment changes modal");e===A.CloseSource.GENERIC&&(0,s.Z9)(n),e===A.CloseSource.CANCEL_BUTTON&&(0,s.Z9)(n),It(!1)}),[]),ja=fn.isAuthenticated&&(null===(ue=fn.user)||void 0===ue?void 0:ue.id)?"".concat(fn.user.id):"guest",[,La]=(0,B._)("wf:animation-page-visit-count:".concat(ja),0);(0,y.useEffect)((()=>{La((e=>e<Number.MAX_SAFE_INTEGER?e+1:e))}),[en.pathname,La]);const Ma=(0,y.useCallback)((()=>{Na(Q.s.ACCESSIBILITY_ANALYZER)()}),[Na]),{isLoading:_a,optimizedVariants:Ra,originalSize:Pa}=((e,t,n)=>{var a,o,i;const[s,l]=(0,y.useState)(),r=(0,y.useMemo)((()=>({fileId:t,fileVersionId:n})),[t,n]),[c,d]=(0,w.aM)({query:V.ZR,variables:r,requestPolicy:"network-only",pause:!t||!n}),[u,f]=(0,w.Db)(V.VA),[p,h]=(0,w.Db)(V.l$);(0,y.useEffect)((()=>{t&&n&&d({requestPolicy:"network-only"})}),[t,n,d]),(0,y.useEffect)((()=>{(async()=>{var e,a;t&&n&&!(null===(a=c.data)||void 0===a||null===(e=a.fileVariants)||void 0===e?void 0:e.length)&&(await f({fileId:t,fileVersionId:n}),await h({fileId:t,fileVersionId:n}),d({requestPolicy:"network-only"}))})()}),[t,n,null===(o=c.data)||void 0===o||null===(a=o.fileVariants)||void 0===a?void 0:a.length]);const m=(0,y.useMemo)((()=>{var e,t,n;const a=null!==(n=null===(t=c.data)||void 0===t||null===(e=t.fileVariants)||void 0===e?void 0:e.filter((e=>e.isOptimized)))&&void 0!==n?n:[],o=new Map;return a.forEach((e=>{o.has(e.fileSize)||o.set(e.fileSize,e)})),Array.from(o.values()).sort(((e,t)=>"application/zip"===e.contentType?-1:"application/zip"===t.contentType?1:0))}),[null===(i=c.data)||void 0===i?void 0:i.fileVariants]);var v;return(0,y.useEffect)((()=>{let t=!0;return(async()=>{if(e)try{const n=await(0,te.yo)(e);t&&l(n)}catch(e){console.error("Failed to extract animation buffer:",e)}})(),()=>{t=!1}}),[e]),{isLoading:c.fetching||!s||u.fetching||p.fetching,optimizedVariants:m,originalSize:null!==(v=null==s?void 0:s.byteLength)&&void 0!==v?v:0}})(Je,null==Xe?void 0:Xe.id,null==Xe?void 0:Xe.currentVersionId);(0,y.useEffect)((()=>{!Xe||Sn===Q.s.ACCESSIBILITY_ANALYZER||qe||Ke.tasks[l.Oc.ENABLE_ASSET_LINK].show&&Sn===Q.s.EMBED||We({taskId:l.Oc.ACCESSIBILITY_ANALYZER})}),[Xe,qe,Ke,We,Sn]);const Da=(0,y.useCallback)((e=>{Qt(e)}),[]);return(0,a.jsxs)(Te,{onStateMachineToggle:Da,children:[(0,a.jsx)(b(),{children:(0,a.jsx)("title",{children:"Animation - LottieFiles Platform"})}),(0,a.jsxs)(x.o,{headerControl:(0,a.jsx)(Y.s,{features:null==Xe?void 0:Xe.features,children:(0,a.jsx)(Ze,{animation:Xe,animationFetching:Cn.fetching})}),contentWrapperCssClasses:"flex overflow-hidden flex-grow",children:[Xe&&(0,a.jsxs)(Y.s,{features:Xe.features,children:[(0,a.jsxs)(C.I,{className:c()({"flex flex-grow":!0}),handle:zn,onChange:Jn,children:[(0,a.jsx)("div",{className:c()({"flex relative flex-grow":!0,"transparency-grid":Gn}),children:(0,a.jsxs)("div",{className:"relative flex w-full h-full",children:[(0,a.jsx)("div",{className:c()({"flex absolute inset-0 flex-grow":!0,"transparency-grid":Gn}),style:{...On?{background:On}:{}}}),Sn===Q.s.LOTTIE_MOCKUP?(0,a.jsx)("div",{className:"relative flex items-center justify-center w-full h-full overflow-auto pr-80",children:(0,a.jsx)(ze,{animation:Xe,canEdit:_n()})}):(0,a.jsxs)("div",{className:c()("relative flex items-center justify-center h-full overflow-auto transition-width",{"w-[calc(100vw-344px)]":Sn!==Q.s.NONE,"w-full":Sn===Q.s.NONE}),children:[Je&&!st&&(0,a.jsx)(Ve,{showComments:!0,canComment:!Ln,canCreateThemes:Mn(),canCreateStateMxns:_n(),mentionables:null===(ve=va.data)||void 0===ve?void 0:ve.commentMentionableUsers,portalRoot:Xn.current,animationUrl:Je,currentDiscussion:pa,currentUserId:null===(be=fn.user)||void 0===be?void 0:be.id,entityId:$n,entityType:X.TY.FileVersion,fileId:Xe.id,controls:!Fn,isLight:ma,onCopyFrameClick:ka,onCopyLinkClick:Ea,onDeleteComment:ta,onEditComment:na,onPostComment:aa,onReplyToComment:oa,onResolveComment:ia,onSelectReaction:sa,onUnresolveComment:la,withContextMenu:!0,themes:null==Vt?void 0:Vt.map((e=>e.id)),themeId:qt,onThemeChange:Wt,formatVersion:Xe.fileObject.attributes.formatVersion,animationHeight:null==et?void 0:et.height,animationWidth:null==et?void 0:et.width}),Je&&Yt&&(0,a.jsx)(Ve,{portalRoot:Xn.current,animationUrl:Yt,controls:!Fn,isLight:ma,onCopyFrameClick:ka,onCopyLinkClick:Ea,withContextMenu:!0,fileId:Xe.id,themes:null==Vt?void 0:Vt.map((e=>e.id)),themeId:qt,onThemeChange:Wt,animationWidth:null==et?void 0:et.width,animationHeight:null==et?void 0:et.height}),!Fn&&(0,a.jsxs)("div",{className:c()("absolute p-0 bottom-8 top-8 right-0 -translate-x-full flex flex-col min-h-0"),children:[!Jt&&(0,a.jsxs)("div",{className:"flex flex-col gap-2","data-onboarding-id":"anim-panel-btn",children:[Rn()&&(0,a.jsx)("div",{"data-onboarding-id":"anim-comment-btn",children:(0,a.jsx)(N.n,{icon:"comment",title:"Comments",shortcut:(0,a.jsx)(T.z,{keys:["C"]}),onClick:Na(Q.s.COMMENTS),iconColorClass:Sn===Q.s.COMMENTS?"text-actionPrimary":"text-gray-600"})}),(0,a.jsx)(N.n,{icon:"info",title:"Animation information",onClick:Na(Q.s.FILE_INFO),iconColorClass:Sn===Q.s.FILE_INFO?"text-actionPrimary":"text-gray-600"}),(0,a.jsx)(Se,{onTabChange:Aa,currentPushoverTab:Sn||Q.s.NONE,onAccessibilityAnalyzerMenuClick:Ma,canUseAccessibilityAnalyzer:bn}),_n()&&!Ln&&(0,a.jsx)("div",{"data-onboarding-id":"anim-color-palette-btn",children:(0,a.jsx)(N.n,{icon:"color-palette",title:"Color Palette",onClick:Na(Q.s.COLOR_PALETTES),iconColorClass:Sn===Q.s.COLOR_PALETTES?"text-actionPrimary":"text-gray-600"})}),!Ln&&(0,a.jsx)("div",{"data-onboarding-id":"anim-segment-btn",children:(0,a.jsx)(N.n,{icon:"segment-mockup",title:"Segments & mockups",onClick:Na(Q.s.SEGMENT_MOCKUP),iconColorClass:Sn===Q.s.SEGMENT_MOCKUP?"text-actionPrimary":"text-gray-600"})}),_n()&&(0,a.jsx)("div",{"data-onboarding-id":"anim-version-btn",children:(0,a.jsx)(N.n,{icon:"history",title:"Version history",onClick:Na(Q.s.VERSIONS),iconColorClass:Sn===Q.s.VERSIONS?"text-actionPrimary":"text-gray-600"})}),Mn()&&!Ln&&(0,a.jsx)(N.n,{icon:"embed",title:"Handoff",iconColorClass:Sn===Q.s.EMBED?"text-actionPrimary":"text-gray-600",onClick:Na(Q.s.EMBED)})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 pt-2 pb-4 md:mt-auto md:py-0",children:[(0,a.jsx)(S.s,{}),(0,a.jsx)(N.n,{icon:"grid",title:"Transparency grid",onClick:Qn,iconColorClass:Gn?"text-actionPrimary":"text-gray-600"}),(0,a.jsx)(Ye,{animationBackgroundColor:On||"#f8fafc",canUpdate:_n(),onChange:e=>{jn(e)},fileId:Xe.id,portalRoot:Xn.current}),(0,a.jsx)(N.n,{icon:"full-screen",title:"Full screen",onClick:Hn,iconColorClass:Fn?"text-actionPrimary":"text-gray-600"}),(0,a.jsx)(I.L,{}),(0,a.jsx)(re.c,{sideOffset:0,align:"end",arrowOffset:-8,side:"bottom",className:"self-end flex justify-center items-center w-full rounded-lg bg-white shadow-[0px 2px 6px 0px rgba(0, 0, 0, 0.06)]",children:(0,a.jsx)(se.q,{side:"left",align:"end",sideOffset:6,source:"animation sidebar",children:(0,a.jsx)(le.u,{title:"Help & resources",placement:"left",children:(0,a.jsx)(k.h,{id:"helper-menu",name:"help",rounded:!0,"aria-haspopup":"true","aria-expanded":"true",focusBackgroundClass:"none",hoverBackgroundClass:"hover:bg-gray-100",backgroundClass:"!size-8 !rounded-lg"})})})})]})]})]})]})}),(0,a.jsx)("div",{className:"absolute bottom-0 right-0 flex flex-grow overflow-hidden top-16","data-onboarding-watch":"side_panel",children:(0,a.jsxs)(i.u,{show:Sn!==Q.s.NONE,className:c()("relative flex flex-col bg-white border-l border-gray-100 w-86",{"pb-24":cn.show}),enter:"transform transition ease-in-out duration-50",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-50",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:[Sn!==Q.s.LOTTIE_MOCKUP&&(0,a.jsx)("div",{className:"absolute right-6 top-5",children:(0,a.jsx)(k.h,{onClick:qn,icon:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(he.J,{name:"cross",customSize:20})})})}),Sn===Q.s.COMMENTS&&(0,a.jsx)(Ge,{currentUserId:null===(ye=fn.user)||void 0===ye?void 0:ye.id,discussions:null===(ge=ca.data)||void 0===ge||null===(Ce=ge.comments)||void 0===Ce?void 0:Ce.edges,isFetchingDiscussions:ca.fetching,isInputExpanded:ba,mentionables:null===(we=va.data)||void 0===we?void 0:we.commentMentionableUsers,mode:ha,parentDiscussion:pa,canFetchMoreComments:ra,onCollapseInput:ga,onFetchMoreComments:da,onExpandInput:Ca,onDelete:ta,onEdit:na,onPost:aa,onReply:oa,onReplyClick:fa,onResolve:ia,onSelectReaction:sa,onUnresolve:la}),Sn===Q.s.FILE_INFO&&et&&(0,a.jsx)(Be,{fileMetaData:et,basicMetadata:nt,fileData:Pn,canEdit:_n(),canDownload:Mn(),isEditing:Boolean(_n()&&mt),fileUrl:Je,tags:gt,fileVersionId:Xe.currentVersion.id,pageSource:"animation details page",thumbnailUrl:null==rt||null===(ke=rt.thumbnails)||void 0===ke||null===(xe=ke.png)||void 0===xe||null===(Ee=xe.medium)||void 0===Ee?void 0:Ee.url,animation:Xe,workspaceId:Xe.project.workspaceId}),Sn===Q.s.COLOR_PALETTES&&(0,a.jsx)(Fe,{animationUrl:Je,portalRoot:Xn.current,workspaceId:Xe.project.workspaceId,setColorModifiedLottie:Tn,setOpenColorPaletteModal:ut}),Sn===Q.s.LOTTIE_MOCKUP&&(0,a.jsx)(Ue,{canEdit:_n(),animation:Xe,onBackToLottieMockupList:Na(Q.s.SEGMENT_MOCKUP)}),Sn===Q.s.SEGMENT_MOCKUP&&(0,a.jsx)(De,{animation:Xe,showLottieMockup:Na(Q.s.LOTTIE_MOCKUP),onSegmentsDirtyChange:xt}),Sn===Q.s.VERSIONS&&(0,a.jsx)(Pe,{onVersionSelected:()=>{lt(null),pt()},animation:Xe}),Sn===Q.s.QRCODE&&(0,a.jsx)(Re,{fileUrl:Xe.fileObject.url}),!vn&&Sn===Q.s.EMBED&&(0,a.jsx)(Le,{canUpdatePublicAsset:_n(),fileId:Xe.id,currentVersionId:Xe.currentVersionId,workspaceId:Xe.project.workspaceId}),!vn&&Sn===Q.s.DOWNLOAD&&nt&&(0,a.jsx)(je,{animation:Xe,basicMetadata:nt,fileMetaData:et,source:"animation"}),vn&&(Sn===Q.s.DOWNLOAD&&nt||Sn===Q.s.EMBED)&&(0,a.jsx)(Me,{selectedTab:Sn,onTabChange:Aa,canUpdatePublicAsset:_n(),fileId:Xe.id,currentVersionId:Xe.currentVersionId,workspaceId:Xe.project.workspaceId,animation:Xe,basicMetadata:nt,fileMetaData:et,source:"animation",themeId:qt,themes:Vt,onThemeChange:Wt}),Sn===Q.s.ACCESSIBILITY_ANALYZER&&(0,a.jsx)(_e,{animationUrl:Je,isLoading:_a,optimizedVariants:Ra,originalSize:Pa,onClickOptimize:Na(Q.s.DOWNLOAD)}),Sn===Q.s.STATE_MACHINES&&(0,a.jsx)(Ie.TV,{})]})}),(0,a.jsx)("div",{ref:Xn})]}),dt&&st&&rt&&(0,a.jsx)(Oe,{currentFile:rt,currentFileId:null==Xe?void 0:Xe.id,projectId:null==Xe||null===(Ae=Xe.project)||void 0===Ae?void 0:Ae.id,lottieAnimation:f()(st),closeCallback:()=>{ut(!1)},animationName:null==Xe?void 0:Xe.name,currentBackgroundColor:(null==Xe?void 0:Xe.backgroundColor)||"none",show:!0}),St&&(0,a.jsx)(O.Z,{buttonTitle:"Discard changes",body:"You've made changes to segments that you haven't saved yet. If you leave now, they'll be discarded.",cancelTitle:"Stay on page",closeCallback:Oa,isDestructive:!1,onConfirm:wa,showModal:St,title:"Discard changes to segments?"}),_t&&(0,a.jsx)(O.Z,{title:"Confirm copy frame to clipboard?",body:"Your browser, Safari, needs confirmation to copy this frame to the clipboard.",buttonTitle:"Confirm",onConfirm:Sa,closeCallback:xa,isDestructive:!1,showModal:_t})]}),Xe&&dn&&!Kn.fetching&&Kn.data&&(0,a.jsx)(Ne,{animation:Xe,handback:Kn.data.fileHandback})]}),(0,a.jsx)("div",{ref:Lt,className:"hidden"})]})};qe.getLayout=e=>(0,a.jsx)(E.By,{showSidebar:!1,compactSidebar:!0,children:(0,a.jsx)(ce.Q,{children:e})});var We=qe},35931:function(e,t,n){n.d(t,{n:function(){return d},s:function(){return c}});var a=n(97458),o=n(61916),i=n(52983);const s={analysis:null,animationData:null,file:null,isLoading:!1,isUploading:!1,url:null,uploadError:null};function l(e,t){switch(t.type){case"SET_ANALYSIS":return{...e,analysis:t.payload};case"SET_ANIMATION_DATA":return{...e,animationData:t.payload};case"SET_FILE":return{...e,file:t.payload};case"SET_LOADING":return{...e,isLoading:t.payload};case"SET_URL":return{...e,url:t.payload};case"RESET_STATE":return s;case"SET_UPLOAD_ERROR":return{...e,uploadError:t.payload};default:return e}}const r=(0,i.createContext)(null);function c(e){let{children:t}=e;const[n,c]=(0,i.useReducer)(l,s),d=(0,i.useCallback)((()=>{c({type:"RESET_STATE"})}),[]),u=(0,i.useCallback)((async e=>{try{c({type:"SET_LOADING",payload:!0}),c({type:"SET_FILE",payload:e});const t=await(0,o.cm)(e);c({type:"SET_ANALYSIS",payload:t});const n=new FileReader;n.onload=e=>{var t;(null===(t=e.target)||void 0===t?void 0:t.result)&&c({type:"SET_ANIMATION_DATA",payload:e.target.result})},n.readAsText(e)}catch(e){console.error("Error processing file:",e),c({type:"SET_ANALYSIS",payload:null})}finally{c({type:"SET_LOADING",payload:!1})}}),[]),f=(0,i.useCallback)((async e=>{if(!n.analysis||n.url!==e)try{c({type:"SET_LOADING",payload:!0}),c({type:"SET_UPLOAD_ERROR",payload:null}),c({type:"SET_URL",payload:e});const t=await fetch(e),n=t.headers.get("content-type"),a=null==n?void 0:n.includes("application/zip");if(!t.ok)throw new Error("Failed to fetch animation");const o=await t.blob(),i=new File([o],a?"animation.lottie":"animation.json",{type:a?"application/zip":"application/json"});await u(i)}catch(e){c({type:"SET_UPLOAD_ERROR",payload:{message:e instanceof Error?e.message:"Unable to load Lottie animation from URL"}})}finally{c({type:"SET_LOADING",payload:!1})}}),[u,n.analysis,n.url]),p=(0,i.useCallback)((e=>c({type:"SET_FILE",payload:e})),[]),h=(0,i.useCallback)((e=>c({type:"SET_LOADING",payload:e})),[]),m=(0,i.useCallback)((e=>c({type:"SET_URL",payload:e})),[]),v=(0,i.useMemo)((()=>({actions:{processFile:u,resetState:d,setFile:p,setIsLoading:h,setUrl:m,handleUrlUpload:f},state:n})),[u,d,p,h,m,f,n]);return(0,a.jsx)(r.Provider,{value:v,children:t})}function d(){const e=(0,i.useContext)(r);if(!e)throw new Error("useAccessibilityAnalyzer must be used within an AccessibilityAnalyzerProvider");return e}},99509:function(e,t,n){n.d(t,{s:function(){return l},w:function(){return r}});var a=n(97458),o=n(78463),i=n(52983);const s=i.createContext({features:[]}),l=e=>{let{children:t,features:n}=e;return(0,a.jsx)(s.Provider,{value:{features:n},children:t})},r=()=>{const{features:e}=i.useContext(s);return e?new o.UZ(e):new o.UZ([])}},95556:function(e,t,n){var a,o;n.d(t,{f:function(){return a},p:function(){return o}}),function(e){e.COLLECTION="COLLECTION",e.FILE="FILE"}(a||(a={})),function(e){e.COMMENT="comment",e.DOWNLOAD_AND_VIEW="downloadAndView",e.EDIT_ACCESS="editAccess",e.NO_ACCESS="noAccess",e.VIEW_ONLY="viewOnly"}(o||(o={}))},65888:function(e,t,n){n.d(t,{O6:function(){return o},TI:function(){return s},jn:function(){return i}});const a=async e=>new Promise((t=>setTimeout(t,e))),o=e=>{if(e.hasAttributeNS("http://www.w3.org/1999/xlink","href")){const t=e.getAttributeNS("http://www.w3.org/1999/xlink","href");t&&t.startsWith("data:image/png;")&&e.setAttributeNS("http://www.w3.org/1999/xlink","href",t.replace("data:image/png;","data:;"))}},i=e=>{const t=e.childNodes;for(let n=0;n<t.length;n+=1){const a=t[n];a instanceof SVGElement&&"none"===a.style.display&&e.removeChild(a)}},s=async(e,t)=>{if(!t)return[];const n=t.firstChild;e.pause(),e.goToAndStop(0,!0);const s=[];for(let t=0;t<e.totalFrames;t+=1){e.goToAndStop(t,!0);const l=n.cloneNode(!0);i(l);const r=l.getElementsByTagName("image");for(let e=0;e<r.length;e+=1){const t=r[e];t&&o(t)}const c=(new XMLSerializer).serializeToString(l);s.push(c),await a(10)}return s}},19877:function(e,t,n){n.d(t,{w:function(){return s}});var a=n(92520),o=n(74035);const i={"Access denied!":e=>{var t,n,o,i;const s=null!==(i=null==e||null===(t=e.extensions)||void 0===t?void 0:t.code)&&void 0!==i?i:"";var l;const r=null!==(l=null==e||null===(o=e.extensions)||void 0===o||null===(n=o.exception)||void 0===n?void 0:n.stacktrace)&&void 0!==l?l:[];throw console.log("Error code:",s),console.log("Stacktrace:",r),new a.J},"Database query failed":e=>{var t,n,o,i;const s=null!==(i=null==e||null===(t=e.extensions)||void 0===t?void 0:t.code)&&void 0!==i?i:"";var l;const r=null!==(l=null==e||null===(o=e.extensions)||void 0===o||null===(n=o.exception)||void 0===n?void 0:n.stacktrace)&&void 0!==l?l:[];throw console.log("Error code:",s),console.log("Stacktrace:",r),new a.J},"File not found":e=>{var t,n,a,i;const s=null!==(i=null==e||null===(t=e.extensions)||void 0===t?void 0:t.code)&&void 0!==i?i:"";var l;const r=null!==(l=null==e||null===(a=e.extensions)||void 0===a||null===(n=a.exception)||void 0===n?void 0:n.stacktrace)&&void 0!==l?l:[];throw console.log("Error code:",s),console.log("Stacktrace:",r),new o.T},Forbidden:e=>{var t,n,o,i;const s=null!==(i=null==e||null===(t=e.extensions)||void 0===t?void 0:t.code)&&void 0!==i?i:"";var l;const r=null!==(l=null==e||null===(o=e.extensions)||void 0===o||null===(n=o.exception)||void 0===n?void 0:n.stacktrace)&&void 0!==l?l:[];throw console.log("Error code:",s),console.log("Stacktrace:",r),new a.J}};function s(e){e.networkError?console.error("Network error:",e.networkError):e.graphQLErrors&&e.graphQLErrors.length>0?e.graphQLErrors.forEach((e=>{const t=e.message,n=Object.keys(i).find((e=>t.includes(e)));var a;n?null===(a=i[n])||void 0===a||a.call(i,e):console.error("GraphQL error:",e)})):console.error("Unknown error:",e)}}}]);