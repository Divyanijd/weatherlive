"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5276],{85276:function(e,t,n){n.r(t),n.d(t,{ProjectActionMenu:function(){return S}});var a=n(97458),o=n(96734),r=n(78463),s=n(52983),l=n(80794),c=n(47575),i=n(57121),d=n(90344),u=n(17910),h=n(27699),m=n(75377),p=n(36522),j=n(59114),x=n(75800),f=n(57655),g=n(19906),w=n(14854);const S=e=>{let{canShareProject:t,hoverBackgroundClass:n,icon:S="meatball-menu-thick",iconClass:C,isHovered:k,isPrivate:v,isSystem:b,navigateToHomeAfterDelete:D,noFocus:I=!1,onDownloadAllClick:A,onOpenChange:y,onSelect:E,permissionScopes:T,projectId:R,projectTitle:N,roundedClass:L,source:F,workspaceId:O}=e;const{hasDownloadAccess:_,hasUpdateAccess:P}=(0,p.O)({scopes:T}),[J,M]=(0,s.useState)(!1),[W,B]=(0,s.useState)(!1),[H,U]=(0,s.useState)(!1),Z=(0,o.SS)(r.AD.ENABLE_ZIP_DOWNLOAD),[,z]=(0,l.Db)(j.b4),{isWorkspaceSuspended:V,openSuspendedWorkspaceModal:Y}=(0,m.q)(O),q=(0,x.useSetRecoilState)(f.I),K=(0,s.useCallback)((e=>{z({id:R,isPrivate:e})}),[R,z]),Q=(0,s.useCallback)((e=>{(0,w.Z9)(new w.jU({action:"click",label:e,source:F}))}),[F]);return P()||_()?(0,a.jsx)("div",{className:"flex items-center ".concat(k||H?"visible":"invisible"),children:(0,a.jsxs)(c.f,{onOpenChange:e=>{U(e),null==y||y(e),e&&Q("open-project-action-menu")},children:[(0,a.jsx)(g.u,{title:"Rename, download, and more...",placement:"top",children:V?(0,a.jsx)(i.h,{noFocus:I,className:C,roundedClass:L,name:S,small:!0,onClick:Y}):(0,a.jsx)(c.f.Trigger,{asChild:!0,type:"icon-only",children:(0,a.jsx)(i.h,{noFocus:I,className:C,roundedClass:L,hoverBackgroundClass:n,name:S,small:!0})})}),(0,a.jsxs)(c.f.Content,{side:"bottom",align:"start",children:[P()&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.f.Item,{onSelect:()=>{null==E||E("rename"),M(!0),Q("rename-project-cta")},children:[(0,a.jsx)(d.J,{medium:!0,name:"pencil",marginRight:!0}),"Rename"]}),t&&(0,a.jsxs)(c.f.Item,{onSelect:()=>{null==E||E("share"),q({isPrivate:Boolean(v),projectId:R,show:!0,workspaceId:O}),Q("share-project-cta")},children:[(0,a.jsx)(d.J,{medium:!0,name:"share",marginRight:!0}),"Share"]}),(0,a.jsx)(g.u,{textCenter:!1,title:v?"Share this project with everyone in the workspace":"Make this project only visible to people who are invited",placement:"right",children:(0,a.jsxs)(c.f.Item,{onSelect:()=>{null==E||E(v?"Share with team":"Make private"),K(!v),Q(v?"share-with-team-cta":"make-private-cta")},children:[v?(0,a.jsx)(d.J,{medium:!0,padding:!0,name:"lock-open",marginRight:!0}):(0,a.jsx)(d.J,{name:"lock",medium:!0,padding:!0,marginRight:!0}),v?"Share with team":"Make private"]})}),(0,a.jsx)(c.f.Separator,{})]}),Z.on&&A&&_()&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(c.f.Item,{onSelect:()=>{null==E||E("download all"),A({id:R,title:N,isPrivate:v,isSystem:b}),Q("download-all-cta")},children:[(0,a.jsx)(d.J,{name:"download",medium:!0,padding:!0,marginRight:!0}),"Download all as"]})}),P()&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.f.Separator,{}),(0,a.jsxs)(c.f.Item,{destructiveAction:!0,onSelect:()=>{null==E||E("delete project"),B(!0),Q("delete-project-cta")},children:[(0,a.jsx)(d.J,{medium:!0,name:"delete",color:"text-red-500",marginRight:!0}),"Delete project"]})]})]}),(0,a.jsx)(h.i,{show:J,projectId:R,projectTitle:N,close:()=>M(!1)}),W&&(0,a.jsx)(u.x,{show:W,projectId:R,projectTitle:N,workspaceId:O,close:()=>B(!1),navigateToHomeAfterDelete:D})]})}):null};t.default=S},17910:function(e,t,n){n.d(t,{x:function(){return f}});var a=n(97458),o=n(96734),r=n(14854),s=n(78463),l=n(84650),c=n(52983),i=n(75800),d=n(80794),u=n(59114),h=n(88293),m=n(34382),p=n(70888),j=n(96523),x=n(31945);const f=e=>{let{close:t,navigateToHomeAfterDelete:n=!0,projectId:f,projectTitle:g,show:w,workspaceId:S}=e;const C=(0,l.useRouter)(),[k,v]=(0,i.useRecoilState)(m.QJ),[b,D]=(0,d.Db)(u.ac),I=(0,p.h)(S),A=(0,x.fK)(I),y=(0,c.useCallback)((async()=>{try{const e=await D({id:f});k&&k.projectId===f&&v(null),e.error||((0,r.Z9)(new r.$u({projectId:f,projectName:g,workspaceId:S})),n&&C.push("/"))}catch(e){throw e instanceof Error?new Error(e.message):new Error("Cannot delete project, an unexpected error occurred")}t()}),[t,D,f,k,v,g,S,C,n]),E=(0,o.SS)(s.AD.SHOW_RECENTLY_DELETED);return(0,a.jsx)(h.s,{title:(0,a.jsxs)("h3",{className:"text-lg leading-6 font-bold text-red-500 w-[90%]",children:['Delete "',g,'" project ?']}),body:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(j.h,{assetType:"project",count:1,isRecentlyDeletedFeatureEnabled:E.on,planType:A})}),buttonTitle:"Delete",showModal:w,onConfirm:y,closeCallback:t,confirmLoading:b.fetching})}},27699:function(e,t,n){n.d(t,{i:function(){return p}});var a=n(97458),o=n(52983),r=n(46833),s=n.n(r),l=n(80794),c=n(59114),i=n(31945),d=n(49471),u=n(80042),h=n(21199),m=n(9881);const p=e=>{let{close:t,projectId:n,projectTitle:r,show:p}=e;const[,j]=(0,l.Db)(c.Y1),[x,f]=(0,o.useState)({}),[g,w]=(0,o.useState)(r),[S,C]=(0,o.useState)(!1),[k,v]=(0,o.useState)(""),b=(0,o.useCallback)((e=>{e&&(e.focus(),e.select())}),[]),D=(0,o.useCallback)((async e=>{if(e.preventDefault(),g.length){C(!0);try{const e=await j({id:n,input:{title:g,slug:s()(g.toLowerCase())}});e.error?(C(!1),(0,i.I1)(e.error,x,f)):(C(!1),t())}catch(e){throw C(!1),new Error("An unexpected error occurred during project rename operation.")}}}),[t,x,n,g,j]),I=(0,o.useCallback)((()=>{t(),w(r),f({}),v("")}),[t,r]),A=(0,o.useCallback)((e=>{w(e.currentTarget.value.trimStart()),f({}),(0,d.s)(e.currentTarget.value.trimStart(),v)}),[]);return(0,o.useEffect)((()=>{w(r)}),[r]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(h.ModalV2,{show:p,closeCallback:I,title:"Rename",paddingSize:"md",titleCssClass:"leading-6 text-gray900 font-bold",children:(0,a.jsx)("form",{onSubmit:D,children:(0,a.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,a.jsx)("div",{children:(0,a.jsx)(m.I,{placeholder:"Project name",onChange:A,inputRef:b,value:g,error:(0,i.ie)("title",x)||k,maxLength:d.C})}),(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)(u.z,{text:"Done",onClick:D,disabled:!g.length||S||k.length>0})})]})})})})}},36522:function(e,t,n){n.d(t,{O:function(){return r}});var a=n(52983),o=n(46736);const r=e=>{let{scopes:t}=e;const n=(0,a.useCallback)((()=>Boolean(null==t?void 0:t.includes(o.l.DOWNLOAD))),[t]);return{hasUpdateAccess:(0,a.useCallback)((()=>Boolean(null==t?void 0:t.includes(o.l.FULL_ACCESS))),[t]),hasDownloadAccess:n}}},46736:function(e,t,n){var a;function o(e){return"object"==typeof e&&null!==e&&"folders"in e}n.d(t,{k:function(){return o},l:function(){return a}}),function(e){e.DOWNLOAD="download",e.FULL_ACCESS="full_access",e.VIEW="view"}(a||(a={}))}}]);