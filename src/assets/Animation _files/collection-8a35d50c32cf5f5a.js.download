(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5186,9597,5154,7254],{18221:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/collection",function(){return t(90157)}])},63567:function(e,l,t){"use strict";t.d(l,{Q:function(){return r}});var n=t(97458),s=t(83849),i=t.n(s),o=(t(52983),t(89103)),a=t(90765);const r=e=>{let{className:l,loaderClassName:t,loadingMore:s,onLoadMore:r}=e;const c=(0,a.S)({onIntersecting:r});return(0,n.jsx)("div",{className:i()("w-full flex justify-center items-center",l),ref:c,children:(0,n.jsx)(o.a,{type:"spinner",customSize:40,className:i()(t,{hidden:!s})})})}},77221:function(e,l,t){"use strict";t.d(l,{o:function(){return s}});var n=t(97458);const s=t(52983).forwardRef(((e,l)=>{let{children:t,contentWrapperCssClasses:s="flex-grow overflow-hidden",headerControl:i,headerWrapperCssClasses:o="bg-white h-16 flex items-center sm:px-6 px-2 border-b border-gray-100 flex-shrink-0",id:a}=e;return(0,n.jsxs)("div",{id:a,ref:l,"data-onboarding-watch":"create_menu_new_button",className:"flex overflow-y-auto absolute inset-0 flex-col w-full",children:[i&&(0,n.jsx)("div",{className:o,children:i}),(0,n.jsx)("div",{className:s,children:t})]})}));s.displayName="PageScaffold"},33650:function(e,l,t){"use strict";t.d(l,{y:function(){return c}});var n=t(97458),s=t(83849),i=t.n(s),o=t(52983),a=t(89103);const r=()=>(0,n.jsx)("svg",{width:"69",height:"62",viewBox:"0 0 69 62",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M63.3649 0C44.1908 0 37.1133 13.67 31.4118 24.6557L27.6841 31.6768C21.6386 43.3279 17.127 50.4054 5.49847 50.4054C4.7762 50.4047 4.06089 50.5464 3.39345 50.8224C2.72601 51.0985 2.11955 51.5035 1.60882 52.0142C1.09809 52.5249 0.693103 53.1314 0.417042 53.7988C0.140981 54.4663 -0.000739042 55.1816 2.89816e-06 55.9039V55.9039C-0.000739042 56.6261 0.140981 57.3414 0.417042 58.0089C0.693103 58.6763 1.09809 59.2828 1.60882 59.7935C2.11955 60.3042 2.72601 60.7092 3.39345 60.9853C4.06089 61.2614 4.7762 61.4031 5.49847 61.4023V61.4023C24.6726 61.4023 31.7445 47.7323 37.4517 36.7466L41.1737 29.7256C47.2248 18.0744 51.7364 10.9969 63.3649 10.9969C64.8232 10.9969 66.2218 10.4176 67.2529 9.38647C68.2841 8.35531 68.8634 6.95676 68.8634 5.49847V5.49847C68.8634 4.04019 68.2841 2.64163 67.2529 1.61047C66.2218 0.579304 64.8232 0 63.3649 0V0Z",fill:"#D9E0E6"})}),c=e=>{let{alt:l,hasError:t=!1,lazy:s=!1,onError:c,src:d}=e;const[u,m]=(0,o.useState)(!0),x=(0,o.useCallback)((()=>{m(!1)}),[]),h=(0,o.useCallback)((()=>{null==c||c(),x()}),[c,x]);return(0,n.jsxs)(n.Fragment,{children:[!t&&u&&d&&(0,n.jsx)(a.a,{type:"spinner",size:"sm"}),!t&&d?(0,n.jsx)("img",{role:"presentation",src:d,alt:l,className:i()("w-full h-full object-contain",{hidden:u}),loading:s?"lazy":"eager",onError:h,onLoad:x}):(0,n.jsx)("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2 [&>svg]:w-full",children:(0,n.jsx)(r,{})})]})}},64777:function(e,l,t){"use strict";t.d(l,{v:function(){return d}});var n=t(97458),s=t(83849),i=t.n(s),o=t(52983),a=t(63567);const r=e=>{let{column:l,fixed:t,render:s,row:o,width:a=75}=e;const r=o[l.field];return(0,n.jsx)("div",{className:i()("overflow-x-hidden min-w-full xs:min-w-0",{"absolute top-2 right-0 !min-w-max xs:relative xs:top-0":t}),style:{width:"".concat(a,"%")},children:(0,n.jsx)("div",{className:i()("flex items-center h-full text-sm px-5",{"opacity-30 pointer-events-none":o.disabled}),children:s&&s(o,l,r)||(0,n.jsx)("div",{className:"text-gray-900",children:r})})})},c=e=>{let{columns:l,render:t,row:s}=e;const a=l.map(((e,i)=>!e.hide&&(0,n.jsx)(r,{column:e,row:s,render:t,width:e.width,fixed:i===l.length-1},"list-".concat(i.toString())))),c=(0,o.useCallback)((e=>{const l=s.onClick,t=s.onSelectionChange;l&&(s.selectionMode?t():l(e))}),[s]);return(0,n.jsx)("div",{className:i()("relative flex flex-col xs:flex-row gap-2 xs:gap-0 py-2 xs:py-1.5 items-center text-red-500 hover:bg-gray-50 w-full select-none cursor-pointer",{"cursor-default":s.disabled}),onClick:c,children:a})},d=e=>{let{canLoadMore:l,columns:t,isLoadingMore:s,onColumnWidthChange:i,onLoadMore:r,renderRow:d,rows:u}=e;const[m,x]=(0,o.useState)({initialX:0,oriWidthPX:0,oriWidth:0,newWidth:0,nextElemWidth:0,idx:0,id:"",nextElemId:""}),h=(0,o.useCallback)((e=>l=>{var n,s;const i=document.getElementById("".concat(e.field,"-").concat(e.use,"-header-column")),o=t.findIndex((l=>l.field===e.field));x({initialX:l.pageX,oriWidthPX:(null==i?void 0:i.getBoundingClientRect().width)||0,oriWidth:e.width,newWidth:e.width,nextElemWidth:null===(n=t[o+1])||void 0===n?void 0:n.width,id:e.field,nextElemId:null===(s=t[o+1])||void 0===s?void 0:s.field,idx:o})}),[t]),f=(0,o.useCallback)((e=>{m.id&&x((l=>{var n;const s=e.pageX-((null==m?void 0:m.initialX)||0),i=(l.oriWidthPX+s)/l.oriWidthPX,o=l.oriWidth*i,a=((null===(n=t[m.idx+1])||void 0===n?void 0:n.width)||0)-(o-l.oriWidth);return a>.5&&o>.5?{...l,newWidth:o,nextElemWidth:a}:l}))}),[m,t]),p=(0,o.useCallback)((()=>{var e;m.id&&(null==i||i(m.id,m.newWidth),null==i||i(null===(e=t[m.idx+1])||void 0===e?void 0:e.field,m.nextElemWidth),x({initialX:0,oriWidthPX:0,oriWidth:0,newWidth:0,nextElemWidth:0,idx:0,id:"",nextElemId:""}))}),[m,i,t]);(0,o.useEffect)((()=>{const e=e=>{p(e)};return window.addEventListener("mouseup",e),()=>{window.removeEventListener("mouseup",e)}}),[p]);const v=()=>(0,n.jsx)(n.Fragment,{children:t.map(((e,l)=>{if(e.hide||!e.use)return null;let s=e.width;return m.id===e.field?s=m.newWidth:m.nextElemId===e.field&&(s=m.nextElemWidth),(0,n.jsxs)("div",{className:"flex items-center py-2 select-none whitespace-nowrap min-w-full xs:min-w-0",style:{width:"".concat(s,"%")},id:"".concat(e.field,"-").concat(e.use,"-header-column"),children:[(0,n.jsx)("div",{className:"flex items-center w-full overflow-x-hidden text-gray-900",children:(0,n.jsx)("div",{className:"px-5",children:e.use})}),l!==t.length-1&&!e.locked&&(0,n.jsx)("div",{className:"w-[1px] px-[1px] bg-gray-200 h-full select-none",style:{cursor:"col-resize"},id:e.field,onMouseDown:h(e)})]},"column-".concat(l.toString(),"-").concat(e.width))}))});return(0,n.jsxs)("div",{className:"w-full overflow-hidden border border-gray-100 rounded-md",children:[(0,n.jsx)("div",{className:"flex flex-col xs:flex-row w-full text-sm border-b border-gray-100 bg-gray-50",onMouseMoveCapture:f,style:m.id?{cursor:"col-resize"}:{},children:(0,n.jsx)(v,{})}),(0,n.jsxs)("div",{className:"w-full bg-white border-gray-100 divide-y divide-gray-100",children:[u.map(((e,l)=>{var s;return(0,n.jsx)(c,{row:e,columns:t,render:d},null!==(s=e.key)&&void 0!==s?s:"list-row".concat(l.toString()))})),l&&(0,n.jsx)(a.Q,{className:"col-span-full",onLoadMore:r,loadingMore:s})]})]})}},4412:function(e,l,t){"use strict";t.d(l,{o:function(){return s}});var n=t(97458);t(52983);const s=e=>{let{children:l,direction:t,stretch:s}=e;return(0,n.jsx)("div",{className:"\n        flex\n        ".concat("column"===t?"flex-col":"flex-row","\n        ").concat("column"===t?"space-y-2":"space-x-2","\n        ").concat("column"===t?"items-start":"items-center","\n        ").concat(s?"justify-between":"","\n      "),children:l})}},39597:function(e,l,t){"use strict";t.r(l),t.d(l,{WorkspaceCollectionActionMenu:function(){return N},default:function(){return k}});var n=t(97458),s=t(52983),i=t(80794),o=t(75800),a=t(47575),r=t(57121),c=t(90344),d=t(19906),u=t(58582),m=t(14854),x=t(41093),h=t(31945),f=t(49471),p=t(80042),v=t(21199),g=t(9881);const w=e=>{let{close:l,collection:t,show:o}=e;const[,a]=(0,i.Db)(x.hr),[r,c]=(0,s.useState)({}),[d,u]=(0,s.useState)(t.name),[w,j]=(0,s.useState)(!1),[C,b]=(0,s.useState)(""),y=(0,s.useCallback)((e=>{e&&(e.focus(),e.select())}),[]),N=(0,s.useCallback)((async e=>{if(e.preventDefault(),d.length){c({}),j(!0);try{const e=await a({id:t.id,input:{name:d}});e.error?(j(!1),(0,h.I1)(e.error,r,c)):(j(!1),l(),(0,m.Z9)(new m.iu({collectionId:t.id,collectionName:d,workspaceId:t.workspaceId})))}catch(e){throw j(!1),new Error("An unexpected error occurred during collection rename operation.")}}else c({name:"Name is required"})}),[t,l,r,d,a]),k=(0,s.useCallback)((()=>{l(),u(t.name),c({}),b("")}),[t.name,l]),M=(0,s.useCallback)((e=>{u(e.currentTarget.value.trimStart()),(0,f.s)(e.currentTarget.value.trimStart(),b)}),[]);return(0,n.jsx)(v.ModalV2,{show:o,title:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("h3",{className:"text-lg leading-6 text-gray-900 font-bold",children:"Rename"})}),closeCallback:k,children:(0,n.jsx)("form",{onSubmit:N,children:(0,n.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,n.jsx)("div",{children:(0,n.jsx)(g.I,{placeholder:"Collection name",onChange:M,inputRef:y,value:d,error:(0,h.ie)("name",r)||C,maxLength:f.C})}),(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsx)(p.z,{text:"Done",onClick:N,disabled:!d.length||w||C.length>0})})]})})})};var j=t(75377),C=t(5154),b=t(62542),y=t(58843);const N=e=>{let{children:l,collection:t,fromSidebar:h,iconSizeClass:f,isHovered:p,navigateToHomeAfterDelete:v=!0,onOpenChange:g,onSelect:N,source:k}=e;const{hasUpdateAccess:M}=(0,C.S)({scopes:t.collectionPermissionScopes}),[S,L]=(0,s.useState)(!1),[E,I]=(0,s.useState)(!1),[W,P]=(0,s.useState)(!1),A=(0,o.useSetRecoilState)(b.T),{activeWorkspace:O}=(0,y.cF)(),[,_]=(0,i.Db)(x.nE),{isWorkspaceSuspended:z,openSuspendedWorkspaceModal:D}=(0,j.q)(t.workspaceId),R=(0,s.useCallback)((e=>{_({id:t.id,isPrivate:e})}),[t.id,_]),F=(0,s.useCallback)((e=>{(0,m.Z9)(new m.jU({action:"click",label:e,source:k}))}),[k]);return M()?(0,n.jsx)("div",{className:"flex items-center mr-1 ".concat(p||W?"visible":"invisible"),children:(0,n.jsxs)(a.f,{onOpenChange:e=>{P(e),null==g||g(e),e&&F("open-collection-action-menu")},children:[z?l||(0,n.jsx)(r.h,{name:"meatball-menu",small:h,sizeClass:f,darker:!h,onClick:D}):(0,n.jsx)(a.f.Trigger,{asChild:!0,type:"icon-only",children:l||(0,n.jsx)(r.h,{tooltip:"Rename, permission, and more...",tooltipPlacement:"top",name:"meatball-menu",sizeClass:f,small:h,darker:!h})}),(0,n.jsxs)(a.f.Content,{side:"bottom",align:"start",children:[(0,n.jsxs)(a.f.Item,{onSelect:e=>{null==N||N("rename"),e.stopPropagation(),L(!0),F("rename-collection-cta")},children:[(0,n.jsx)(c.J,{medium:!0,name:"pencil",marginRight:!0}),"Rename"]}),(0,n.jsxs)(a.f.Item,{onSelect:e=>{e.stopPropagation(),null==N||N("share"),A({show:!0,collectionId:t.id,isPrivate:Boolean(t.isPrivate),workspaceId:t.workspaceId,workspaceIcon:(null==O?void 0:O.icon)||"",workspaceName:(null==O?void 0:O.name)||""}),F("share-collection-cta")},children:[(0,n.jsx)(c.J,{medium:!0,name:"share",marginRight:!0}),"Share"]}),(0,n.jsx)(d.u,{textCenter:!1,title:t.isPrivate?"Share this collection with everyone in the workspace":"Make this collection only visible to people who are invited",placement:"right",children:(0,n.jsxs)(a.f.Item,{onSelect:e=>{e.stopPropagation(),null==N||N(t.isPrivate?"share with team":"make private"),R(!t.isPrivate),F(t.isPrivate?"share-collection-with-team-cta":"make-collection-private-cta")},children:[t.isPrivate?(0,n.jsx)(c.J,{medium:!0,padding:!0,name:"lock-open",marginRight:!0}):(0,n.jsx)(c.J,{name:"lock",medium:!0,padding:!0,marginRight:!0}),t.isPrivate?"Share with team":"Make private"]})}),(0,n.jsx)(a.f.Separator,{}),(0,n.jsx)(a.f.Item,{asChild:!0,destructiveAction:!0,onSelect:e=>{null==N||N("delete"),e.stopPropagation(),I(!0),F("delete-collection-cta")},children:(0,n.jsxs)("div",{className:"flex items-center text-sm rounded cursor-pointer hover:bg-red-100 ",children:[(0,n.jsx)(c.J,{medium:!0,name:"delete",color:"text-red-500",marginRight:!0}),(0,n.jsx)("div",{className:"text-red-500",children:" Delete collection"})]})})]}),(0,n.jsx)(w,{collection:t,show:S,close:()=>{L(!1)}}),(0,n.jsx)(u.a,{show:E,collectionId:t.id,workspaceId:t.workspaceId,name:t.name,close:()=>{I(!1)},navigateToHomeAfterDelete:v})]})}):null};var k=N},88293:function(e,l,t){"use strict";t.d(l,{s:function(){return a}});var n=t(97458),s=t(52983),i=t(8559),o=t(21199);const a=e=>{let{body:l,buttonTitle:t,cancelTitle:a="Cancel",closeCallback:r=(()=>null),confirmLoading:c=!1,isDestructive:d=!0,onConfirm:u,showModal:m,title:x,zIndexClassName:h="z-50"}=e;const f=(0,s.useCallback)((()=>{u()}),[u]),p=(0,s.useCallback)((e=>{r(e)}),[r]);return(0,n.jsx)(o.ModalV2,{show:m,title:x,paddingSize:"md",zIndexClassName:h,closeCallback:p,children:(0,n.jsxs)("div",{className:"mt-6 space-y-10",children:[(0,n.jsx)("p",{className:"text-sm text-gray-900",children:l}),(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,n.jsx)(i.z,{variant:"ghost",onClick:()=>p(o.CloseSource.CANCEL_BUTTON),fluid:!0,children:a}),(0,n.jsx)(i.z,{disabled:c,showLoader:c,color:d?"red":"teal",onClick:f,fluid:!0,children:t})]})]})})};l.Z=a},58582:function(e,l,t){"use strict";t.d(l,{a:function(){return m}});var n=t(97458),s=t(14854),i=t(84650),o=t(52983),a=t(80794),r=t(41093),c=t(88293),d=t(74699),u=t(74048);const m=e=>{let{close:l,collectionId:t,name:m,navigateToHomeAfterDelete:x=!0,show:h,workspaceId:f}=e;const p=(0,d.p)(),v=(0,i.useRouter)(),[,g]=(0,a.Db)(r.cq),w=(0,o.useCallback)((async()=>{try{(await g({id:t})).error||((0,s.Z9)(new s.rz({collectionId:t,collectionName:m,workspaceId:f})),null==p||p.pushSuccess("Collection deleted successfully"),x&&v.push("/"))}catch(e){throw e instanceof Error?new Error(e.message):new Error("Cannot delete collection, an unexpected error occurred")}}),[g,m,v,p,f,t,x]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(c.s,{title:(0,n.jsxs)("h3",{className:"text-lg leading-6 text-red-500 font-bold w-[90%]",children:['Delete "',m,'" collection ?']}),body:(0,u.B)("All of its content will be removed. You won't be able to undo this."),buttonTitle:"Delete",showModal:h,onConfirm:w,closeCallback:l})})}},39963:function(e,l,t){"use strict";t.d(l,{X:function(){return i}});var n=t(97458),s=t(52983);const i=e=>{let{children:l,passThrough:t=!1}=e;const i=(0,s.useCallback)((e=>{t||e.stopPropagation()}),[t]),o=(0,s.useCallback)((()=>{}),[]);return(0,n.jsx)("div",{onKeyDown:o,onClick:i,children:l})}},5154:function(e,l,t){"use strict";t.d(l,{S:function(){return i}});var n,s=t(52983);!function(e){e.FULL_ACCESS="full_access",e.VIEW="view"}(n||(n={}));const i=e=>{let{scopes:l}=e;return{hasUpdateAccess:(0,s.useCallback)((()=>Boolean(null==l?void 0:l.includes(n.FULL_ACCESS))),[l])}}},73695:function(e,l,t){"use strict";t.d(l,{k:function(){return i}});var n=t(84650),s=t(52983);const i=(e,l)=>{const t=(0,n.useRouter)(),{sort:i}=t.query;return(0,s.useMemo)((()=>"string"==typeof i?e&&l?i.replace(e,l):i:JSON.stringify({updatedAt:"DESC"})),[i])}},90157:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return Q}});var n=t(97458),s=t(77221),i=t(2448),o=t(52983);const a=e=>{let{items:l,view:t}=e;return"grid"===t?(0,n.jsx)("div",{className:"grid grid-cols-2 gap-6 lg:grid-cols-3 xl:grid-cols-4 xxl:grid-cols-5 2xl:grid-cols-5 3xl:grid-cols-6 4xl:grid-cols-7",children:Array.from({length:l}).map(((e,l)=>(0,n.jsx)("div",{className:"aspect-square",children:(0,n.jsx)(i.J,{className:"rounded-md"})},"skeleton-".concat(l+1))))}):"list"===t?(0,n.jsx)("div",{className:"flex flex-col gap-4",children:Array.from({length:l}).map(((e,l)=>(0,n.jsx)("div",{className:"h-[40px]",children:(0,n.jsx)(i.J,{className:"rounded-md"})},"skeleton-".concat(l+1))))}):null};var r=t(4412),c=t(12077),d=t(14854),u=t(8559),m=t(57121),x=t(10299),h=t(16284);const f=[{label:"Last modified",value:"last-modified"},{label:"Newest",value:"newest"},{label:"Oldest",value:"oldest"},{label:"A - Z",value:"a-z"}],p=e=>{let{onCreateClick:l,setViewLayout:t,viewLayout:s}=e;const{user:i}=(0,c.a)(),{isEditor:a}=(0,h.N)(),p=(0,o.useCallback)((()=>{(0,d.Z9)(new d.rR({userId:null==i?void 0:i.id,view:"grid"===s?"list":"grid"})),t("grid"===s?"list":"grid")}),[t,s,null==i?void 0:i.id]);return(0,n.jsxs)("div",{className:"flex flex-col space-y-7 w-full",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("h1",{className:"text-2xl text-gray-900 font-arboria",children:"Collections"}),a&&(0,n.jsx)(u.z,{variant:"primary",className:"w-40",icon:"plus",iconSize:"small",onClick:l,children:(0,n.jsx)("span",{className:"flex gap-2 items-center",children:"Collection"})})]}),(0,n.jsxs)(r.o,{stretch:!0,children:[(0,n.jsx)(x.j,{sortKey:"collection",commonSorts:f}),(0,n.jsx)(m.h,{name:"list"===s?"grid-view":"list-view",darker:!0,noFocus:!0,onClick:p,medium:!0},s)]})]})};var v=t(25204),g=t(82929),w=t(54557),j=t(73695),C=t(53426),b=t(58843),y=t(78463),N=t(29130),k=t.n(N),M=t(89103),S=t(63567),L=t(23986),E=t(17529),I=t.n(E),W=t(33650),P=t(83849),A=t.n(P);function O(e){let{additionalClasses:l,alt:t,url:s}=e;return(0,n.jsx)("div",{className:A()("overflow-hidden relative rounded-md border border-gray-100",l),children:(0,n.jsx)(W.y,{src:s,alt:t})})}function _(e){let{alt:l,itemsCount:t,thumbnails:s}=e;return 0===s.length?(0,n.jsx)("div",{className:"relative flex-1 overflow-hidden",children:(0,n.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,n.jsx)("img",{src:"/images/empty-states/empty-folder-thumbnail.svg",className:"opacity-40",width:"130",alt:"Empty Collection"})})}):1===s.length?(0,n.jsx)(O,{additionalClasses:"flex-1",url:null!==(i=s[0])&&void 0!==i?i:"",alt:l}):2===s.length?(0,n.jsxs)("div",{className:"flex flex-1 gap-2",children:[(0,n.jsx)(O,{additionalClasses:"flex-1",url:null!==(o=s[0])&&void 0!==o?o:"",alt:l}),(0,n.jsx)(O,{additionalClasses:"flex-1",url:null!==(a=s[1])&&void 0!==a?a:"",alt:l})]}):(0,n.jsxs)("div",{className:"flex flex-1 gap-2 overflow-hidden",children:[(0,n.jsx)(O,{additionalClasses:"flex-1",url:null!==(r=s[0])&&void 0!==r?r:"",alt:l}),(0,n.jsxs)("div",{className:"flex flex-col flex-1 gap-2",children:[(0,n.jsx)(O,{additionalClasses:"flex-1",url:null!==(c=s[1])&&void 0!==c?c:"",alt:l}),t>3?(0,n.jsx)("div",{className:"bg-[#F8FAFC] text-[#8795A1] flex-1 rounded-md text-lg flex items-center justify-center",children:"+".concat(t-2)}):(0,n.jsx)(O,{additionalClasses:"flex-1",url:null!==(d=s[2])&&void 0!==d?d:"",alt:l})]})]});var i,o,a,r,c,d}var z=t(39963),D=t(39597);function R(e){let{collection:l,hoverClasses:t,optionsMenuOpen:s,setOptionsMenuOpen:i}=e;return(0,n.jsx)("div",{className:"flex justify-end flex-1",children:(0,n.jsx)(z.X,{children:(0,n.jsx)(D.default,{isHovered:!0,collection:l,onOpenChange:i,navigateToHomeAfterDelete:!1,source:"index page",children:(0,n.jsx)(m.h,{tooltip:"Rename, permission, and more...",tooltipDisabled:s,tooltipPlacement:"top",name:"meatball-menu",className:"text-gray-600",roundedClass:"rounded",hoverBackgroundClass:A()("hover:bg-gray-100",{"bg-gray-50":s},t),small:!0})})})})}var F=t(19906),T=t(84144);function X(e){let{collection:l}=e;const t=(0,o.useMemo)((()=>(0,L.WU)(new Date(l.updatedAt),"d MMM")),[l.updatedAt]),[s,i]=(0,o.useState)(!1),[a,r]=(0,o.useState)(!1),c=(0,o.useMemo)((()=>{var e;return null!==(e=l.collectionThumbnailUrls)&&void 0!==e?e:[]}),[l.collectionThumbnailUrls]),d=(0,o.useCallback)((()=>{i(!0)}),[]),u=(0,o.useCallback)((()=>{i(!1)}),[]);var m;return(0,n.jsx)(I(),{href:"/collection/".concat(l.id),children:(0,n.jsxs)("div",{className:"flex flex-col gap-1 p-3 bg-white border-gray-100 rounded-md border-3 aspect-square",onMouseEnter:d,onMouseLeave:u,children:[(0,n.jsx)(_,{thumbnails:c,alt:l.name,itemsCount:l.files.length}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[l.isPrivate&&(0,n.jsx)(F.u,{placement:"bottom",className:"-ml-0.5",title:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:"Only people who are invited"}),(0,n.jsx)("br",{}),(0,n.jsx)("span",{children:"can view and edit this collection"})]}),children:(0,n.jsx)(T.dvY,{width:16,className:"text-gray-900"})}),(0,n.jsx)("h2",{className:"text-sm text-gray-900 line-clamp-1",children:l.name})]}),(0,n.jsxs)("p",{className:"text-xs text-gray-400 line-clamp-1",children:[null!==(m=l.files.length)&&void 0!==m?m:0," items  •  Modified ",t]})]}),(0,n.jsx)("div",{className:A()({hidden:!s&&!a}),children:(0,n.jsx)(R,{collection:l,optionsMenuOpen:a,setOptionsMenuOpen:r,hoverClasses:"hover:bg-gray-50"})})]})]})})}function B(e){let{canLoadMore:l,collections:t,isLoadingMore:s,onLoadMore:i}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-6 lg:grid-cols-3 xl:grid-cols-4 xxl:grid-cols-5 2xl:grid-cols-5 3xl:grid-cols-6 4xl:grid-cols-7",children:[t.edges.map((e=>(0,n.jsx)(X,{collection:e.node},e.node.id))),s&&(0,n.jsx)(M.a,{type:"spinner"})]}),l&&(0,n.jsx)(S.Q,{className:"col-span-full",onLoadMore:i,loadingMore:s})]})}var V=t(84650),U=t(64777);const Z=[{field:"name",use:"Name",width:30},{field:"items",use:"Items",width:10},{field:"lastModified",use:"Last modified",width:30},{field:"createdBy",use:"Created by",width:20,locked:!0},{field:"option",use:"",width:10}];function q(e){let{column:l,displayValue:t,row:s}=e;const[i,a]=(0,o.useState)(!1);return"name"===l.field?(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-900 truncate",children:[(0,n.jsx)("div",{className:"xs:py-[10px]",children:null==s?void 0:s.icon}),(0,n.jsx)("span",{className:"truncate",children:null==s?void 0:s.name})]}):"option"===l.field?(0,n.jsx)(R,{collection:null==s?void 0:s.collection,optionsMenuOpen:i,setOptionsMenuOpen:a}):(0,n.jsx)("div",{className:"text-sm text-gray-900",children:t})}const J=(e,l,t)=>(0,n.jsx)(q,{row:e,column:l,displayValue:t});function H(e){let{canLoadMore:l,collections:t,isLoadingMore:s,onLoadMore:i}=e;const[a,r]=(0,g._)("collections-resizable-list-column-state",Z),c=(0,o.useCallback)(((e,l)=>{r((t=>{const n=t.find((l=>l.field===e));return n&&(n.width=l),[...t]}))}),[r]),d=(0,V.useRouter)(),u=(0,o.useMemo)((()=>null==t?void 0:t.edges.map((e=>{var l,t;return{id:e.node.id,name:e.node.name,items:null===(l=e.node.files)||void 0===l?void 0:l.length,lastModified:(0,L.WU)(new Date(e.node.updatedAt),"MMMM d, yyyy"),createdBy:null===(t=e.node.createdBy)||void 0===t?void 0:t.name,icon:e.node.isPrivate?(0,n.jsx)(F.u,{placement:"bottom",title:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:"Only people who are invited"}),(0,n.jsx)("br",{}),(0,n.jsx)("span",{children:"can view and edit this collection"})]}),children:(0,n.jsx)(T.dvY,{width:16})}):(0,n.jsx)(T.qZy,{width:16}),collection:e.node,onClick:async()=>d.push("/collection/".concat(e.node.id,"?from=index page")),key:e.node.id}}))),[t,d]);return(0,n.jsx)(U.v,{columns:a,rows:u,renderRow:J,onColumnWidthChange:c,canLoadMore:l,isLoadingMore:s,onLoadMore:i})}function Q(){const{cancel:e,isLoaded:l}=(0,w.N)();(0,o.useEffect)((()=>{l&&e({taskId:y.Oc.COLLECTIONS_INDEX})}),[e,l]);const[t,i]=(0,g._)("collection-view","grid"),[r,c]=(0,o.useState)(!1),u=(0,o.useCallback)((()=>{(0,d.Z9)(new d.Rd("button","create collection","index page")),c(!0)}),[]),m=(0,o.useCallback)((()=>{c(!1)}),[]),{activeWorkspaceId:x}=(0,b.cF)(),h=(0,j.k)(),{canLoadMore:f,isFetching:N,isLoadingMore:M,loadMore:S,workspaceCollections:L}=(0,b.ML)(null!=x?x:"",{first:25,orderBy:h},{requestPolicy:"cache-and-network"}),{isWorkspaceLoading:E}=(0,C.r)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(k(),{children:(0,n.jsx)("title",{children:"Collections - LottieFiles Platform"})}),(0,n.jsx)(s.o,{headerWrapperCssClasses:"flex items-center px-6 flex-shrink-0 pt-3 pb-4",contentWrapperCssClasses:"flex-grow p-6 pt-0",headerControl:(0,n.jsx)(p,{viewLayout:t,setViewLayout:i,onCreateClick:u}),children:E||N||!L?(0,n.jsx)(a,{items:10,view:t}):(0,n.jsx)(n.Fragment,{children:"grid"===t?(0,n.jsx)(B,{collections:L,canLoadMore:f,isLoadingMore:M,onLoadMore:S}):(0,n.jsx)(H,{collections:L,canLoadMore:f,isLoadingMore:M,onLoadMore:S})})}),(0,n.jsx)(v.default,{show:r,close:m,workspaceId:x,source:"index page"})]})}},74048:function(e,l,t){"use strict";t.d(l,{B:function(){return n}});const n=function(e){return e}}},function(e){e.O(0,[3986,299,2888,9774,179],(function(){return l=18221,e(e.s=l);var l}));var l=e.O();_N_E=l}]);